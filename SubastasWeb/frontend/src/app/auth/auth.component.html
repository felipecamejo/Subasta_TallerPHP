<div class="container mt-5" style="max-width: 400px;">

  <div *ngIf="!isLoggedIn">
    <div class="d-flex justify-content-center mb-3">
      <button class="btn btn-primary me-2" [class.active]="isLoginMode" (click)="isLoginMode = true">Iniciar sesión</button>
      <button class="btn btn-secondary" [class.active]="!isLoginMode" (click)="isLoginMode = false">Registrarse</button>
    </div>

    <!-- Formulario Login -->
    <form *ngIf="isLoginMode" (ngSubmit)="onLogin()">
      <div class="mb-3">
        <label for="loginEmail" class="form-label">Correo electrónico</label>
        <input
          type="email"
          id="loginEmail"
          class="form-control"
          [(ngModel)]="loginData.email"
          name="loginEmail"
          required
        />
      </div>
      <div class="mb-3">
        <label for="loginPassword" class="form-label">Contraseña</label>
        <input
          type="password"
          id="loginPassword"
          class="form-control"
          [(ngModel)]="loginData.password"
          name="loginPassword"
          required
        />
      </div>
      <button type="submit" class="btn btn-primary w-100">Ingresar</button>
    </form>

    <!-- Formulario Registro -->
    <form *ngIf="!isLoginMode" (ngSubmit)="onRegister()">
      <div class="mb-3">
        <label for="regNombre" class="form-label">Nombre</label>
        <input
          type="text"
          id="regNombre"
          class="form-control"
          [(ngModel)]="registerData.nombre"
          name="regNombre"
          required
        />
      </div>
      <div class="mb-3">
        <label for="regEmail" class="form-label">Correo electrónico</label>
        <input
          type="email"
          id="regEmail"
          class="form-control"
          [(ngModel)]="registerData.email"
          name="regEmail"
          required
        />
      </div>
      <div class="mb-3">
        <label for="regContrasenia" class="form-label">Contraseña</label>
        <input
          type="password"
          id="regContrasenia"
          class="form-control"
          [(ngModel)]="registerData.contrasenia"
          name="regContrasenia"
          required
        />
      </div>
      <div class="mb-3">
        <label for="regTipo" class="form-label">Tipo de usuario</label>
        <select
          id="regTipo"
          class="form-select"
          [(ngModel)]="registerData.tipo"
          name="regTipo"
          required
        >
          <option value="" disabled selected>Seleccione un rol</option>
          <option value="cliente">Cliente</option>
          <option value="rematador">Rematador</option>
        </select>
      </div>
      <div class="mb-3" *ngIf="registerData.tipo === 'rematador'">
        <label for="regMatricula" class="form-label">Matrícula</label>
        <input
          type="text"
          id="regMatricula"
          class="form-control"
          [(ngModel)]="registerData.matricula"
          name="regMatricula"
          required
        />
      </div>

      <button type="submit" class="btn btn-secondary w-100">Registrar</button>
    </form>
  </div>

  <!-- Estado logueado -->
  <div *ngIf="isLoggedIn" class="text-center">
    <h5>Bienvenido, {{ userEmail }}</h5>
    <button class="btn btn-danger mt-3" (click)="logout()">Cerrar sesión</button>
  </div>

</div>