<section class="container mt-4">
  <h2>Restablecer contraseña</h2>

  <form [formGroup]="form" (ngSubmit)="enviar()" novalidate>
    <!-- Email -->
    <div class="mb-3">
      <label for="email">Correo electrónico</label>
      <input
        id="email"
        type="email"
        class="form-control"
        formControlName="email"
        [class.is-invalid]="form.get('email')?.invalid && form.get('email')?.touched"
      />
      <div class="invalid-feedback" *ngIf="form.get('email')?.errors?.['required']">
        El email es obligatorio.
      </div>
      <div class="invalid-feedback" *ngIf="form.get('email')?.errors?.['email']">
        Ingresá un email válido.
      </div>
    </div>

    <!-- Nueva contraseña -->
    <div class="mb-3">
      <label for="password">Nueva contraseña</label>
      <input
        id="password"
        type="password"
        class="form-control"
        formControlName="password"
        [class.is-invalid]="password?.invalid && password?.touched"
      />
      <div class="invalid-feedback" *ngIf="password?.errors?.['required']">
        La contraseña es obligatoria.
      </div>
      <div class="invalid-feedback" *ngIf="password?.errors?.['minlength']">
        La contraseña debe tener al menos 8 caracteres.
      </div>
    </div>

    <!-- Confirmación -->
    <div class="mb-3">
      <label for="password_confirmation">Confirmar contraseña</label>
      <input
        id="password_confirmation"
        type="password"
        class="form-control"
        formControlName="password_confirmation"
        [class.is-invalid]="password_confirmation?.invalid && password_confirmation?.touched || form.errors?.['passwordMismatch']"
      />
      <div class="invalid-feedback" *ngIf="password_confirmation?.errors?.['required']">
        Debés confirmar la contraseña.
      </div>
      <div class="invalid-feedback" *ngIf="form.errors?.['passwordMismatch']">
        Las contraseñas no coinciden.
      </div>
    </div>

    <button class="btn btn-primary" type="submit" [disabled]="form.invalid">Actualizar contraseña</button>
  </form>

  <!-- Mensaje de éxito o error -->
  <div class="mt-3" *ngIf="mensaje">
    <div class="alert alert-info">{{ mensaje }}</div>
  </div>
</section>
